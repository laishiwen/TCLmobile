!function(e){function t(){var t=o.getBoundingClientRect().width;t/i>640&&(t=640*i),e.rem=t/16,o.style.fontSize=e.rem+"px"}var i,a,n,r=e.document,o=r.documentElement,l=r.querySelector('meta[name="viewport"]'),d=r.querySelector('meta[name="flexible"]');if(l){console.warn("将根据已有的meta标签来设置缩放比例");var m=l.getAttribute("content").match(/initial\-scale=(["']?)([\d\.]+)\1?/);m&&(a=parseFloat(m[2]),i=parseInt(1/a))}else if(d){var m=d.getAttribute("content").match(/initial\-dpr=(["']?)([\d\.]+)\1?/);m&&(i=parseFloat(m[2]),a=parseFloat((1/i).toFixed(2)))}if(!i&&!a){var c=(e.navigator.appVersion.match(/android/gi),e.navigator.appVersion.match(/iphone/gi)),s=e.devicePixelRatio;i=c?s>=3?3:s>=2?2:1:s,a=1/i}if(o.setAttribute("data-dpr",i),!l)if(l=r.createElement("meta"),l.setAttribute("name","viewport"),l.setAttribute("content","initial-scale="+a+", maximum-scale="+a+", minimum-scale="+a+", user-scalable=no"),o.firstElementChild)o.firstElementChild.appendChild(l);else{var p=r.createElement("div");p.appendChild(l),r.write(p.innerHTML)}e.dpr=i,e.addEventListener("resize",function(){clearTimeout(n),n=setTimeout(t,300)},!1),"complete"===r.readyState&&(r.body.style.fontSize=12*i+"px"),r.addEventListener("DOMContentLoaded",function(){r.body.style.fontSize=12*i+"px"},!1),t()}(window);